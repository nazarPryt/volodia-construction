import { Metadata } from 'next'
import CallButton from '@/components/CallButton'
import Link from 'next/link'
import { PATH } from '@/config/PATH'
import { PAGE_METADATA } from '@/config/metadata'
import PageHeader from '@/components/PageHeader'
import ServiceCard from '@/components/ServiceCard'
import StructuredData from '@/components/StructuredData'
import { getOwnerInfo } from '@/sanity/lib/getOwnerInfo'
import { client } from '@/sanity/lib/client'
import { SERVICES_PAGE_QUERY } from '@/sanity/lib/queries'
import type { ServicesPageData } from '@/sanity/types/servicesPage'

export const metadata: Metadata = PAGE_METADATA.services

// Fallback data with all current services
const fallbackData: ServicesPageData = {
  services: [
    {
      icon: 'üè†',
      title: '–†–µ–º–æ–Ω—Ç –ø—ñ–¥ –∫–ª—é—á',
      description:
        '–ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ä–µ–º–æ–Ω—Ç–Ω–∏—Ö —Ä–æ–±—ñ—Ç –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –¥–µ–º–æ–Ω—Ç–∞–∂—É –¥–æ —Ñ—ñ–Ω—ñ—à–Ω–æ–≥–æ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è. –Ü–¥–µ–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –Ω–æ–≤–∏—Ö –∫–≤–∞—Ä—Ç–∏—Ä –∞–±–æ –ø–æ–≤–Ω–æ—ó —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó.',
      details: [
        '–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π',
        '–ó–∞–º—ñ–Ω–∞ –µ–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–∫–∏ —Ç–∞ —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∏',
        '–í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è —Å—Ç—ñ–Ω —Ç–∞ –ø—ñ–¥–ª–æ–≥',
        '–£–∫–ª–∞–¥–∞–Ω–Ω—è –ø–ª–∏—Ç–∫–∏ —Ç–∞ –ø—ñ–¥–ª–æ–≥–æ–≤–æ–≥–æ –ø–æ–∫—Ä–∏—Ç—Ç—è',
        '–§–∞—Ä–±—É–≤–∞–Ω–Ω—è, —à–ø–∞–ª–µ—Ä–∏, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–µ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–µ—Ä–µ–π —Ç–∞ –ø–ª—ñ–Ω—Ç—É—Å—ñ–≤',
      ],
      price: '–≤—ñ–¥ 5000 –≥—Ä–Ω/–º¬≤',
    },
    {
      icon: 'üé®',
      title: '–ö–æ—Å–º–µ—Ç–∏—á–Ω–∏–π —Ä–µ–º–æ–Ω—Ç',
      description:
        '–®–≤–∏–¥–∫–µ —Ç–∞ —è–∫—ñ—Å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—î—Ä—É –±–µ–∑ –º–∞—Å—à—Ç–∞–±–Ω–∏—Ö –±—É–¥—ñ–≤–µ–ª—å–Ω–∏—Ö —Ä–æ–±—ñ—Ç. –ó–º—ñ–Ω–∞ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è —Å—Ç—ñ–Ω, —Å—Ç–µ–ª—ñ, –ø—ñ–¥–ª–æ–≥–∏.',
      details: [
        '–§–∞—Ä–±—É–≤–∞–Ω–Ω—è —Å—Ç—ñ–Ω —Ç–∞ —Å—Ç–µ–ª—ñ',
        '–ü–æ–∫–ª–µ–π–∫–∞ —à–ø–∞–ª–µ—Ä',
        '–£–∫–ª–∞–¥–∞–Ω–Ω—è –ª–∞–º—ñ–Ω–∞—Ç—É, –ø–∞—Ä–∫–µ—Ç—É',
        '–ó–∞–º—ñ–Ω–∞ –ø–ª—ñ–Ω—Ç—É—Å—ñ–≤',
        '–ö–æ—Å–º–µ—Ç–∏—á–Ω–∏–π —Ä–µ–º–æ–Ω—Ç —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∏',
        '–û–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ—Ñ—É—Ä–Ω—ñ—Ç—É—Ä–∏',
      ],
      price: '–≤—ñ–¥ 2000 –≥—Ä–Ω/–º¬≤',
    },
    {
      icon: 'üî®',
      title: '–ö–∞–ø—ñ—Ç–∞–ª—å–Ω–∏–π —Ä–µ–º–æ–Ω—Ç',
      description:
        '–ü–æ–≤–Ω–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø—Ä–∏–º—ñ—â–µ–Ω–Ω—è –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø–µ—Ä–µ–ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è, –∑–∞–º—ñ–Ω–∏ –≤—Å—ñ—Ö –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ–π —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –¥–∏–∑–∞–π–Ω—É.',
      details: [
        '–î–µ–º–æ–Ω—Ç–∞–∂ –¥–æ –Ω–µ—Å—É—á–∏—Ö —Å—Ç—ñ–Ω',
        '–ü–µ—Ä–µ–ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è (–∑—ñ –≤—Å—ñ–º–∞ –¥–æ–∑–≤–æ–ª–∞–º–∏)',
        '–ó–∞–º—ñ–Ω–∞ –≤—Å—ñ—Ö –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ–π',
        '–ù–æ–≤—ñ —Å—Ç—ñ–Ω–∏ —Ç–∞ –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–∫–∏',
        '–ü–æ–≤–Ω–µ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è —Ç–∞ –¥–µ–∫–æ—Ä—É–≤–∞–Ω–Ω—è',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ—ó —Å–∞–Ω—Ç–µ—Ö–Ω—ñ–∫–∏ —Ç–∞ –µ–ª–µ–∫—Ç—Ä–∏–∫–∏',
      ],
      price: '–≤—ñ–¥ 7000 –≥—Ä–Ω/–º¬≤',
    },
    {
      icon: '‚ö°',
      title: '–ï–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ñ —Ä–æ–±–æ—Ç–∏',
      description: '–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –º–æ–Ω—Ç–∞–∂ –µ–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–æ–∫, –≤–∏–º–∏–∫–∞—á—ñ–≤, –æ—Å–≤—ñ—Ç–ª—é–≤–∞–ª—å–Ω–∏—Ö –ø—Ä–∏–ª–∞–¥—ñ–≤.',
      details: [
        '–ü—Ä–æ–∫–ª–∞–¥–∞–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–∫–∏',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –µ–ª–µ–∫—Ç—Ä–æ—â–∏—Ç—ñ–≤',
        '–ú–æ–Ω—Ç–∞–∂ —Ä–æ–∑–µ—Ç–æ–∫ —Ç–∞ –≤–∏–º–∏–∫–∞—á—ñ–≤',
        '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç—ñ–≤ –∑–∞—Ö–∏—Å—Ç—É',
        '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–æ–±—É—Ç–æ–≤–æ—ó —Ç–µ—Ö–Ω—ñ–∫–∏',
      ],
      price: '–≤—ñ–¥ 150 –≥—Ä–Ω/—Ç–æ—á–∫–∞',
    },
    {
      icon: 'üöø',
      title: '–°–∞–Ω—Ç–µ—Ö–Ω—ñ—á–Ω—ñ —Ä–æ–±–æ—Ç–∏',
      description: '–ó–∞–º—ñ–Ω–∞ —Ç–∞ –º–æ–Ω—Ç–∞–∂ –≤–æ–¥–æ–ø—Ä–æ–≤—ñ–¥–Ω–∏—Ö —Ç–∞ –∫–∞–Ω–∞–ª—ñ–∑–∞—Ü—ñ–π–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∞–Ω—Ç–µ—Ö–Ω—ñ—á–Ω–æ–≥–æ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è.',
      details: [
        '–ó–∞–º—ñ–Ω–∞ –≤–æ–¥–æ–ø—Ä–æ–≤—ñ–¥–Ω–∏—Ö —Ç—Ä—É–±',
        '–ú–æ–Ω—Ç–∞–∂ –∫–∞–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∞–Ω–Ω, –¥—É—à–æ–≤–∏—Ö –∫–∞–±—ñ–Ω',
        '–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —É–º–∏–≤–∞–ª—å–Ω–∏–∫—ñ–≤, —É–Ω—ñ—Ç–∞–∑—ñ–≤',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–º—ñ—à—É–≤–∞—á—ñ–≤',
        '–ú–æ–Ω—Ç–∞–∂ –±–æ–π–ª–µ—Ä—ñ–≤',
      ],
      price: '–≤—ñ–¥ 500 –≥—Ä–Ω/—Ç–æ—á–∫–∞',
    },
    {
      icon: '‚óºÔ∏è',
      title: '–ü–ª–∏—Ç–∫–æ–≤—ñ —Ä–æ–±–æ—Ç–∏',
      description:
        '–£–∫–ª–∞–¥–∞–Ω–Ω—è –∫–µ—Ä–∞–º—ñ—á–Ω–æ—ó –ø–ª–∏—Ç–∫–∏, –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω—ñ—Ç—É, –º–æ–∑–∞—ó–∫–∏ –≤ –≤–∞–Ω–Ω–∏—Ö –∫—ñ–º–Ω–∞—Ç–∞—Ö, –∫—É—Ö–Ω—è—Ö —Ç–∞ —ñ–Ω—à–∏—Ö –ø—Ä–∏–º—ñ—â–µ–Ω–Ω—è—Ö.',
      details: [
        '–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö–Ω—ñ',
        '–£–∫–ª–∞–¥–∞–Ω–Ω—è –∫–µ—Ä–∞–º—ñ—á–Ω–æ—ó –ø–ª–∏—Ç–∫–∏',
        '–£–∫–ª–∞–¥–∞–Ω–Ω—è –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω—ñ—Ç—É',
        '–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–∑–∞—ó—á–Ω–∏—Ö –ø–∞–Ω–Ω–æ',
        '–ó–∞—Ç–∏—Ä–∞–Ω–Ω—è —à–≤—ñ–≤',
        '–ì—ñ–¥—Ä–æ—ñ–∑–æ–ª—è—Ü—ñ—è',
      ],
      price: '–≤—ñ–¥ 350 –≥—Ä–Ω/–º¬≤',
    },
    {
      icon: 'üö™',
      title: '–°—Ç–æ–ª—è—Ä–Ω—ñ —Ä–æ–±–æ—Ç–∏',
      description: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–µ—Ä–µ–π, –º–æ–Ω—Ç–∞–∂ –ø–ª—ñ–Ω—Ç—É—Å—ñ–≤, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω—ñ—à, –ø–æ–ª–∏—Ü—å —Ç–∞ —ñ–Ω—à–∏—Ö –¥–µ—Ä–µ–≤—è–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π.',
      details: [
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º—ñ–∂–∫—ñ–º–Ω–∞—Ç–Ω–∏—Ö –¥–≤–µ—Ä–µ–π',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–≤–µ—Ä–µ–π',
        '–ú–æ–Ω—Ç–∞–∂ –ø–ª—ñ–Ω—Ç—É—Å—ñ–≤',
        '–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—ñ–ø—Å–æ–∫–∞—Ä—Ç–æ–Ω–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–∏—Ü—å —Ç–∞ –Ω—ñ—à',
      ],
      price: '–≤—ñ–¥ 800 –≥—Ä–Ω/—à—Ç',
    },
    {
      icon: 'üéØ',
      title: '–û–∑–¥–æ–±–ª—é–≤–∞–ª—å–Ω—ñ —Ä–æ–±–æ—Ç–∏',
      description: '–§–∞—Ä–±—É–≤–∞–Ω–Ω—è, —à–ø–∞–∫–ª—é–≤–∞–Ω–Ω—è, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–µ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è —Å—Ç—ñ–Ω —Ç–∞ —Å—Ç–µ–ª—ñ —Ä—ñ–∑–Ω–∏–º–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª–∞–º–∏.',
      details: [
        '–®–ø–∞–∫–ª—é–≤–∞–Ω–Ω—è —Å—Ç—ñ–Ω —Ç–∞ —Å—Ç–µ–ª—ñ',
        '–§–∞—Ä–±—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ—Ä—Ö–æ–Ω—å',
        '–ü–æ–∫–ª–µ–π–∫–∞ —à–ø–∞–ª–µ—Ä',
        '–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞ —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞',
        '–í–µ–Ω–µ—Ü—ñ–∞–Ω—Å—å–∫–∞ —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞',
        '–ù–∞—Ç—è–∂–Ω—ñ —Å—Ç–µ–ª—ñ',
      ],
      price: '–≤—ñ–¥ 120 –≥—Ä–Ω/–º¬≤',
    },
    {
      icon: 'ü™ü',
      title: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ñ–∫–æ–Ω',
      description: '–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä–∏—Ö –≤—ñ–∫–æ–Ω, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–∏—Ö –º–µ—Ç–∞–ª–æ–ø–ª–∞—Å—Ç–∏–∫–æ–≤–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π, —É—Ç–µ–ø–ª–µ–Ω–Ω—è —Ç–∞ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è.',
      details: [
        '–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä–∏—Ö –≤—ñ–∫–æ–Ω',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ç–∞–ª–æ–ø–ª–∞—Å—Ç–∏–∫–æ–≤–∏—Ö –≤—ñ–∫–æ–Ω',
        '–†–µ–≥—É–ª—é–≤–∞–Ω–Ω—è —Ñ—É—Ä–Ω—ñ—Ç—É—Ä–∏',
        '–£—Ç–µ–ø–ª–µ–Ω–Ω—è –≤—ñ–¥–∫–æ—Å—ñ–≤',
        '–û–∑–¥–æ–±–ª–µ–Ω–Ω—è –≤—ñ–¥–∫–æ—Å—ñ–≤',
        '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—ñ–¥–≤—ñ–∫–æ–Ω–Ω—è',
      ],
      price: '–≤—ñ–¥ 2500 –≥—Ä–Ω/—à—Ç',
    },
  ],
}

export default async function ServicesPage() {
  // Fetch services page data and owner info
  const [servicesPageData, ownerInfo] = await Promise.all([
    client.fetch<ServicesPageData | null>(SERVICES_PAGE_QUERY).catch(() => null),
    getOwnerInfo(),
  ])

  // Use fetched data or fallback
  const data = servicesPageData || fallbackData

  return (
    <>
      <StructuredData type="services" ownerInfo={ownerInfo} />
      <PageHeader
        title="–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏"
        description="–í–∏–∫–æ–Ω—É—î–º–æ –ø–æ–≤–Ω–∏–π —Å–ø–µ–∫—Ç—Ä —Ä–µ–º–æ–Ω—Ç–Ω–∏—Ö —Ä–æ–±—ñ—Ç –¥–ª—è –∫–≤–∞—Ä—Ç–∏—Ä –±—É–¥—å-—è–∫–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ. –ì–∞—Ä–∞–Ω—Ç—É—î–º–æ —è–∫—ñ—Å—Ç—å, –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—ñ–≤ —Ç–∞ –ø—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å —Ü—ñ–Ω."
      />

      <section className="bg-background w-full py-16">
        <div className="container mx-auto max-w-7xl px-4">
          <div className="grid gap-8 lg:grid-cols-2">
            {data.services.map((service, index) => (
              <ServiceCard
                key={index}
                icon={service.icon}
                title={service.title}
                description={service.description}
                details={service.details}
                price={service.price}
                delay={index * 100}
              />
            ))}
          </div>
        </div>
      </section>

      {/* Price Note */}
      <section className="relative w-full py-12">
        <div className="bg-grid absolute inset-0 opacity-20" />
        <div className="relative z-10 container mx-auto max-w-7xl px-4">
          <div
            className="border-border bg-background-card mx-auto max-w-3xl rounded-lg border p-8 text-center"
            data-aos="fade-up"
          >
            <h2 className="font-heading text-foreground mb-4 text-2xl font-medium">
              –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ
            </h2>
            <p className="text-text-muted mb-6">
              –í–∫–∞–∑–∞–Ω—ñ —Ü—ñ–Ω–∏ —î –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∏–º–∏. –¢–æ—á–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –æ–±—Å—è–≥—É —Ä–æ–±—ñ—Ç, –æ–±—Ä–∞–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ —Ç–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
              –ø—Ä–æ—î–∫—Ç—É. –ó–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ –Ω–∞–º –¥–ª—è –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ—ó –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó —Ç–∞ –≤–∏—ó–∑–¥—É –Ω–∞ –æ–±—î–∫—Ç.
            </p>
            <div className="flex flex-col justify-center gap-4 sm:flex-row">
              <a href={`tel:${ownerInfo.phone.number}`} className="btn-primary inline-flex items-center justify-center">
                –ó–∞–º–æ–≤–∏—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
              </a>
              <Link
                href={PATH.CONTACT}
                className="border-foreground text-foreground hover:bg-foreground hover:text-background inline-flex items-center justify-center border bg-transparent px-8 py-4 text-base font-medium transition-all"
              >
                –ù–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞–º
              </Link>
            </div>
          </div>
        </div>
      </section>

      <CallButton ownerInfo={ownerInfo} />
    </>
  )
}
